function fc_GetJQGrid_Ajax(e, t, r, o, a, n, i, s, l, c) { var u = r.replace("#", ""); null != document.getElementById("gbox_" + u) && $(r).jqGrid("GridUnload"), null == l && (l = !0); var d = 10; null == c && (c = !1), $(r).jqGrid({ datatype: function () { $.ajax({ type: "POST", data: "{'strFiltros':" + JSON.stringify(e) + ",'pPageSize':'" + $(r).getGridParam("rowNum") + "','pCurrentPage':'" + $(r).getGridParam("page") + "','pSortColumn':'" + $(r).getGridParam("sortname") + "','pSortOrder':'" + $(r).getGridParam("sortorder") + "'}", dataType: "json", url: t, contentType: "application/json; charset=utf-8", async: !0, beforeSend: function () { fc_show_progress(!0) }, complete: function () { fc_show_progress(!1) }, success: function (e, t) { "success" == t ? $(r)[0].addJSONData(JSON.parse(e.d)) : alert(JSON.parse(e.responseText).Message) } }) }, jsonReader: { root: "Items", page: "CurrentPage", total: "PageCount", records: "RecordCount", repeatitems: !0, cell: "Row", id: "ID" }, colNames: a, colModel: n, pager: o, rownumbers: !1, loadtext: "Cargando datos...", recordtext: "{0} - {1} de {2} registros", emptyrecords: "No existen resultados", pgtext: "Pág: {0} de {1}", rowNum: d, pgbuttons: l, pginput: l, viewrecords: !0, multiselect: c, sortname: 0, sortorder: "asc", autowidth: !0, gridview: !0, width: "auto", height: "auto", altRows: !1, gridComplete: function () { }, onSelectRow: function (e) { "" != i && i(e) }, ondblClickRow: function (e) { "" != s && s(e) } }).navGrid(o, { edit: !1, add: !1, search: !1, del: !1, refresh: !1 }) } function fc_CargaGrilla(e, t, r, o, a, n, i, s, l) { try { var c = e.replace("#", ""); null != document.getElementById("gbox_" + c) ? ($(e).jqGrid("GridUnload"), fc_cargarGrillaJSon(e, t, r, o, a, n, i, s, l)) : fc_cargarGrillaJSon(e, t, r, o, a, n, i, s, l) } catch (u) { alert("CATCH: " + u) } } function fc_cargarGrillaJSon(e, t, r, o, a, n, i, s, l) { null == s && (s = !0); var c = 10; 0 == s && (c = a.length), null == l && (l = !1); var u; u = a, theGrid = $(e), numberTemplate = { formatter: "number", align: "right", sorttype: "number" }, theGrid.jqGrid({ datatype: "local", data: u, loadtext: "Cargando...", colNames: r, colModel: o, autowidth: !0, gridview: !0, rowNum: c, loadonce: !0, sortname: 0, sortorder: "asc", pager: t, pgtext: "Pág: {0} de {1}", viewrecords: !0, recordtext: "{0} - {1} de {2} registros", emptyrecords: "No existen resultados", multiselect: l, height: "100%", rownumbers: !1, pgbuttons: s, pginput: s, gridComplete: function () { for (var t = $(e).jqGrid("getDataIDs"), r = 0; r < t.length; r++) { var o = t[r]; $(e).jqGrid("getRowData", o) } }, onSelectRow: function (e) { "" != n && n(e) }, ondblClickRow: function (e) { "" != i && i(e) }, altRows: !1 }), $(e).jqGrid("bindKeys", { onEnter: function (e) { i(e) } }) } function fc_Hide_Check_All(e) { var t = $(e); $("#cb_" + t[0].id).hide() } function fc_CrearTreeView(e, t, r, o, a) { $("#" + e).jstree("destroy"), $(function () { $("#" + e).jstree({ plugins: ["", t], core: { multiple: r, data: o} }).on("changed.jstree", function (e, t) { var r, o, n = []; for (r = 0, o = t.selected.length; o > r; r++) n.push(t.instance.get_node(t.selected[r]).id); a(n.join(", ")) }).jstree() }) } function fc_CargarCombo(o,n,e){$("#"+o).html(""),0==n.length?$("#"+o).append("<option value=''>--Ninguno--</option>"):n.length>1?""!=e&&$("#"+o).append("<option value=''>"+e+"</option>"):"--Seleccione--"==e&&$("#"+o).append("<option value=''>"+e+"</option>"),$.each(n,function(n,e){$("#"+o).append("<option value='"+e.value+"'>"+e.nombre+"</option>")})} function fc_CallService(e, t, r) { fc_show_progress(!0), $.ajax({ type: "POST", data: e, dataType: "json", url: t, contentType: "application/json; charset=utf-8", async: !0, beforeSend: function () { }, complete: function () { fc_show_progress(!1) }, success: function (e, t) { "success" == t ? r(JSON.parse(e.d)) : alert("ERROR SUCCESS: " + JSON.parse(jsondata.responseText).Message) }, error: function (e, t, r) { fc_errorAjax(e, t, r) } }) } function fc_errorAjax(e, t, r) { if (401 == e.status) alert("Acceso no Autorizado: " + r), location.reload(); else { var o = e.responseText.indexOf("<title>") + 7, a = e.responseText.indexOf("</title>") - o, n = e.responseText.substr(o, a); if ("" == n) try { n = jQuery.parseJSON(e.responseText).Message } catch (i) { } alert("Error: (" + e.status + "): " + n) } } function fc_FormatFecha(e, t, r, o, a, n, i) { $.datepicker.regional.es = { closeText: "Cerrar", prevText: "Previo", nextText: "Próximo", monthNames: ["Enero", "Febrero", "Marzo", "Abril", "Mayo", "Junio", "Julio", "Agosto", "Septiembre", "Octubre", "Noviembre", "Diciembre"], monthNamesShort: ["Ene", "Feb", "Mar", "Abr", "May", "Jun", "Jul", "Ago", "Sep", "Oct", "Nov", "Dic"], monthStatus: "Ver otro mes", yearStatus: "Ver otro año", dayNames: ["Domingo", "Lunes", "Martes", "Miércoles", "Jueves", "Viernes", "Sábado"], dayNamesShort: ["Dom", "Lun", "Mar", "Mie", "Jue", "Vie", "Sáb"], dayNamesMin: ["Do", "Lu", "Ma", "Mi", "Ju", "Vi", "Sa"], dateFormat: "dd/mm/yy", firstDay: 0, initStatus: "Selecciona la fecha", isRTL: !1 }, $.datepicker.setDefaults($.datepicker.regional.es); var s = "#" + e; $(s).width(80), $(s).datepicker({ changeMonth: t, changeYear: r, dateFormat: "dd/mm/yy", minDate: o, maxDate: a, showButtonPanel: !0, onClose: function (e) { "" != n && null != n && $("#" + i).datepicker("option", "MIN" == n ? "minDate" : "maxDate", e) } }), $(s).keydown(function (e) { return 8 === e.keyCode ? !1 : void 0 }), $(s).keypress(function (e) { e.preventDefault() }) } function fc_Modal(e, t, r) { $(function () { $("#" + e).dialog({ autoOpen: !1, modal: r, width: "auto", height: "auto", close: function () { t() }, open: function () { } }) }) } function fc_show_progress(e) { e ? $("#divProgress").show() : $("#divProgress").hide() } function fc_PressKey(e, t) { event.keyCode == e && document.getElementById(t).click() } function fc_UploadFile(e, t, r, o) { if (-1 != navigator.appName.indexOf("Explorer") && -1 == navigator.appVersion.indexOf("MSIE 1")) return void alert("- Debe usar Internet Explorer superior a 9 o otro navegador."); for (var a = document.getElementById(e), n = a.files, i = 1, s = "", l = new Array(".gif", ".jpg", ".png", ".doc", ".docx", ".xls", ".xlsx", ".ppt", ".pptx", ".txt", ".pdf"), c = document.getElementById(e).value, u = c.substring(c.lastIndexOf(".")).toLowerCase(), d = !1, f = 0; f < l.length; f++) if (l[f] == u) { d = !0; break } if (!d) return alert("Comprueba la extensión de los archivos a subir. \n  Sólo se pueden subir archivos con extensiones: " + l.join() + "\n"), !1; var p = 0; d = !1; for (var f = 0; f < n.length; f++) if (p = n[f].size / 1024, p > r) { d = !0; break } if (p = parseInt(p), d) return alert("El tamaño del archivo no puede ser mayor a " + r.toString() + " KB"), !1; fc_show_progress(!0); try { for (var f = 0; f < n.length; f++) { s = "0"; var m = new XMLHttpRequest, g = new FormData; g.append("file", n[f]), g.append("name", ""), g.append("ruta", t), m.open("POST", "../FileUpload.ashx/ProcessRequest", !0), m.onload = function (e) { if (200 == this.status) { var t = this.responseText.split("|"); o(t, p), fc_show_progress(!1) } else alert(e) }, m.send(g), i += 1 } document.getElementById(e).value = null } catch (v) { alert(v) } } function fc_Trim(e) { var t, r = e; for (t = 0; t < r.length && " " == r.charAt(t); ) r = r.substring(t + 1, r.length); for (t = r.length - 1; t >= 0 && " " == r.charAt(t); t = r.length - 1) r = r.substring(0, t); return r } function fc_Replace(e, t, r) { return e.split(t).join(r) } function fc_FormatImporte(e) { var t = document.getElementById(e); $("#" + e).keypress(function (e) { return fc_KeyPressTxtImporte(e, t, mascara_importe) }), $("#" + e).bind("paste", function () { return !1 }), $("#" + e).focus(function (e) { return fc_OnFocusTxtImporte(e, t, mascara_importe) }), $("#" + e).blur(function (e) { return fc_OnBlurTxtImporte(e, t, mascara_importe) }) } function fc_KeyPressTxtImporte(e, t, r) { r = fc_Replace(r, ",", ""); var o = r.split("."); if (null == e && (e = window.event), null != e) { var a = 0; if (a = e.which ? e.which : e.keyCode, 35 == a || 36 == a || 37 == a || 38 == a || 39 == a || 40 == a || 46 == a || 45 == a || 9 == a || 8 == a) return !0; if (t.value.length >= r.length) return !1; if (46 != a && (48 > a || a > 57)) return !1; if (46 == a && (o.length > 1 && t.value.indexOf(".") > -1 || o.length <= 1)) return !1 } return !0 } function fc_OnFocusTxtImporte(e, t) { return t.value = fc_Replace(t.value, ",", ""), !0 } function fc_OnBlurTxtImporte(e, t, r) { var o = /^[\- \d ,.]+$/i, a = /^\d+$/i; if (t.value = fc_Replace(t.value, ",", ""), "" != fc_Trim(t.value)) { var n = r.split("."); if (n.length > 1) { if (!fc_Trim(t.value).match(o)) return alert("El valor ingresado" + mstrFormatoIncorrecto + "El formato correcto es: " + r), t.value = "", t.focus(), !1 } else if (!fc_Trim(t.value).match(a)) return alert("El valor ingresado" + mstrFormatoIncorrecto + "El formato correcto es: " + r), t.value = "", t.focus(), !1; var i = ""; n.length > 1 ? (t.value = parseFloat(t.value), isNaN(t.value) && (t.value = 0), t.value = roundNumber(t.value, n[1].length)) : (t.value = parseFloat(t.value), isNaN(t.value) && (t.value = 0)), t.value = t.value, arrTextBox = t.value.split("."); for (var s = arrTextBox[0].split(""), l = s.length - 1; l >= 0; l--) i += s[l], s.length - l != 0 && 0 != l && (s.length - l) % 3 == 0 && (i += ","); s = i.split(""), i = ""; for (var l = s.length - 1; l >= 0; l--) i += s[l]; arrTextBox.length > 1 && (i = i + "." + arrTextBox[1]), t.value = i } } function roundNumber(e, t) { var r; if (t = Number(t), 1 > t) r = Math.round(e).toString(); else { var o = e.toString(); -1 == o.lastIndexOf(".") && (o += "."); var a = o.lastIndexOf(".") + t, n = Number(o.substring(a, a + 1)), i = Number(o.substring(a + 1, a + 2)); if (i >= 5) { if (9 == n && a > 0) for (; a > 0 && (9 == n || isNaN(n)); ) "." != n ? (a -= 1, n = Number(o.substring(a, a + 1))) : a -= 1; n += 1 } r = o.substring(0, a) + n.toString() } -1 == r.lastIndexOf(".") && (r += "."); for (var s = r.substring(r.lastIndexOf(".") + 1).length, l = 0; t - s > l; l++) r += "0"; return r } function fc_OpenReport(e, t, r) { var o = "750"; "1" == r && (o = "1050"); var a = "../Reportes/FrmPrint.aspx?cod=" + e + "&prm=" + t; window.open(a, "_blank", "status=1,toolbar=no,menubar=no,location=no,scrollbars=1,resizable=1,width=" + o + ",height=600") } var mascara_importe = "999,999,999.99", mstrFormatoIncorrecto = " no tiene el formato correcto.\n";